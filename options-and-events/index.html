---
layout: default
title: Options &amp; Events
---

<h1 class="jg-h1-secondary">
    Options &amp; Events
</h1>

<hr/>

<div>
    <p>
        This configurable demo is to quickly explore Justified Gallery settings.
        Moreover, it is also a good example that uses Justified Gallery as a stateful entity.
        In fact, in this example, Justified Gallery is called when the page is loaded using some settings, and
        then it is called again only to change a specific setting, leaving the old ones unchanged.
    </p>
    <div style="margin-top: 20px;">
        <form id="jgs-form" class="form-horizontal" role="form">
            <div class="col-sm-8">

                <div class="form-group" id="jgs-rowHeight-container">
                    <label class="col-sm-4 control-label" for="jgs-rowHeight">Row Height</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control input-sm" id="jgs-rowHeight" value="120"/>
                    </div>
                </div>

                <div class="form-group" id="jgs-maxRowHeight-container">
                    <label class="col-sm-4 control-label" for="jgs-maxRowHeight">Max Row Height</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control input-sm" id="jgs-maxRowHeight" value="0"/>
                    </div>
                </div>

                <div class="form-group" id="jgs-maxRowsCount-container">
                    <label class="col-sm-4 control-label" for="jgs-maxRowsCount">Max Rows Count</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control input-sm" id="jgs-maxRowsCount" value="0"/>
                    </div>
                </div>

                <div class="form-group" id="jgs-margins-container">
                    <label class="col-sm-4 control-label" for="jgs-margins">Margins</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control input-sm" id="jgs-margins" value="1"/>
                    </div>
                </div>

                <div class="form-group" id="jgs-border-container">
                    <label class="col-sm-4 control-label" for="jgs-border">Border</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control input-sm" id="jgs-border" value="0"/>
                    </div>
                </div>

                <div class="form-group" id="jgs-lastRowOpt-container">
                    <label class="col-sm-4 control-label">Last row</label>
                    <div class="col-sm-8">
                        <select class="form-control" name="jgs-lastRow" id="jgs-lastRowOptions">
                            <option value="justify">Justify</option>
                            <option value="nojustify">No Justify</option>
                            <option value="left">Left</option>
                            <option value="center">Center</option>
                            <option value="right">Right</option>
                            <option value="center">Center</option>
                            <option value="hide">Hide</option>
                          </select>
                    </div>
                </div>

            </div>

            <div class="col-sm-4">
                <div class="form-group" id="jgs-captions-container">
                    <label class="col-sm-8 control-label" for="jgs-captions">Captions</label>
                    <div class="col-sm-4">
                        <div class="checkbox">
                            <input type="checkbox" id="jgs-captions" checked="checked"/>
                        </div>
                    </div>
                </div>

                <div class="form-group" id="jgs-randomize-container">
                    <label class="col-sm-8 control-label" for="jgs-randomize">Randomize</label>
                    <div class="col-sm-4">
                        <div class="checkbox">
                            <input type="checkbox" id="jgs-randomize"/>
                        </div>
                    </div>
                </div>
            </div>

        </form>
    </div>
    <div id="liveDemo">
        {% for en in site.images %}
        <a href="{{ en.url | prepend: site.baseurl }}_b.jpg">
            <img alt="{{ en.desc }}" src="{{ en.url | prepend: site.baseurl }}_m.jpg"/>
        </a>
        {% endfor %}
    </div>
    <script>
        $(document).ready(function () {
            $('#jgs-form').submit(false);

            $('#liveDemo').justifiedGallery({
                rowHeight: 120,
                maxRowHeight: null,
                margins: 1,
                border: 0,
                rel: 'liveDemo',
                lastRow: 'nojustify',
                captions: true,
                randomize: false,
                sizeRangeSuffixes: {
                    lt100: '_t',
                    lt240: '_m',
                    lt320: '_n',
                    lt500: '',
                    lt640: '_z',
                    lt1024: '_b'
                }
            }).on('jg.complete', function () {
                $(this).find('a').colorbox({
                    maxWidth: '80%',
                    maxHeight: '80%',
                    opacity: 0.8,
                    transition: 'elastic',
                    current: ''
                });
            });

            $('#jgs-form #jgs-rowHeight').on('keyup', function () {
                var m = parseInt($(this).val(), 10);
                if (!isNaN(m) && m > 0) {
                    $('#liveDemo').justifiedGallery({rowHeight: m});
                    $('#jgs-form #jgs-rowHeight-container').removeClass('has-error');
                } else {
                    $('#jgs-form #jgs-rowHeight-container').addClass('has-error');
                }
            });

            $('#jgs-form #jgs-maxRowHeight').on('keyup', function () {
                var m = parseInt($(this).val(), 10);
                if (!isNaN(m) && m >= 0) {
                    $('#liveDemo').justifiedGallery({maxRowHeight: m});
                    $('#jgs-form #jgs-maxRowHeight-container').removeClass('has-error');
                } else {
                    $('#jgs-form #jgs-maxRowHeight-container').addClass('has-error');
                }
            });

            $('#jgs-form #jgs-maxRowsCount').on('keyup', function () {
                var m = parseInt($(this).val(), 10);
                if (!isNaN(m) && m >= 0) {
                    $('#liveDemo').justifiedGallery({maxRowsCount: m});
                    $('#jgs-form #jgs-rowHeight-container').removeClass('has-error');
                } else {
                    $('#jgs-form #jgs-rowHeight-container').addClass('has-error');
                }
            });

            $('#jgs-form #jgs-margins').on('keyup', function () {
                var m = parseInt($(this).val(), 10);
                if (!isNaN(m) && m >= 0) {
                    $('#liveDemo').justifiedGallery({margins: m});
                    $('#jgs-form #jgs-margins-container').removeClass('has-error');
                } else {
                    $('#jgs-form #jgs-margins-container').addClass('has-error');
                }
            });

            $('#jgs-form #jgs-border').on('keyup', function () {
                var b = parseInt($(this).val(), 10);
                if (!isNaN(b)) {
                    $('#liveDemo').justifiedGallery({border: b});
                    $('#jgs-form #jgs-border-container').removeClass('has-error');
                } else {
                    $('#jgs-form #jgs-border-container').addClass('has-error');
                }
            });

            $('#jgs-form select[name="jgs-lastRow"]').change(function () {
                $('#liveDemo').justifiedGallery({lastRow: $(this).val()});
            });

            $('#jgs-form #jgs-captions').on('change', function (e) {
                if (!$(this).prop('checked')) $('#liveDemo .jg-caption').remove();
                $('#liveDemo').justifiedGallery({captions: $(this).prop('checked')});
            });

            $('#jgs-form #jgs-randomize').on('change', function (e) {
                $('#liveDemo').justifiedGallery({randomize: $(this).prop('checked')});
            });

        });
    </script>
</div>

<hr/>

<h2>Options</h2>

<div style="margin-top: 20px;">
    <table class="table">
        <tr>
            <th>option</th>
            <th>default value</th>
            <th>description</th>
        </tr>
        <tr>
            <td><code>rowHeight</code></td>
            <td><code>120</code></td>
            <td>The preferred rows height in pixel.</td>
        </tr>
        <tr>
            <td><code>maxRowHeight</code></td>
            <td><code>false</code></td>
            <td>This option could be a false or negative value to keep it disabled. Could be a number (e.g <code>200</code>)
                which specifies the maximum row height in pixel. Alternatively, a string which specifies a percentage
                (e.g. "200%" means that the row height can't exceed <code>2 * rowHeight</code>). <strong>Note that with this
                option can crop the images if they need to be higher to be justified.</strong>
            </td>
        </tr>
        <tr>
            <td><code>maxRowsCount</code></td>
            <td><code>0</code></td>
            <td>This parameter limits the number of rows to show. Justified Gallery hides the unwanted rows, and if the page
                is resized more (or less) images are shown. 
                <strong>Note that this this option doesn't limit the number of rows by making images smaller.</strong>
                A value 0 means disabled.
            </td>
        </tr>
        <tr>
            <td><code>sizeRangeSuffixes</code></td>
            <td><code style="white-space: nowrap;">{ }</code></td>
            <td>
                <p>
                    Describes the suffix for each size range. By default other thumbnails are not searched.
                </p>
                <p>
                    To agree with the <a href="http://www.flickr.com/services/api/misc.urls.html">Flickr's suffixes</a>
                    you should change it in the following way:
                </p>
                <p>
                    <code style="white-space: nowrap;">{'lt100':'_t', <br/>
                        'lt240':'_m', <br/>
                        'lt320':'_n', <br/>
                        'lt500':'', <br/>
                        'lt640':'_z', <br/>
                        'lt1024':'_b'}</code>
                </p>
                <p>
                    The keys could be specified also as numbers (e.g. <code style="white-space: nowrap;">{512:'_small',
                    1024:'_big'}</code>
                    to specify the '_small' suffix for images that are less than 512px on the longest side, and '_big'
                    for bigger ones).
                </p>
            </td>
        </tr>
        <tr>
            <td><code>thumbnailPath</code></td>
            <td><code style="white-space: nowrap;">undefined</code></td>
            <td>
                <p>
                    To configure a custom thumbnail selector rather than using <code>sizeRangeSuffixes</code>, to have
                    more flexibility in some particular situations. The function will be called giving the following arguments:
                    the current path of the image, the width and the height of the image to show (after it has been resized),
                    and the image element which can be used to get further information.
                </p>
                <p>
                    For example, to select the correct thumbnail changing only a suffix of the current filename (similarly
                    to <code>sizeRangeSuffixes</code>)
                </p>
                <p>
					<pre><code>$("#myGallery").justifiedGallery({
  thumbnailPath: function (currentPath, width, height, image) {
    if (Math.max(width, height) < 250) {
      return currentPath.replace(/(.*)(_[a-z]+)(\..*)/, "$1_small$2");
    } else { 
      return currentPath.replace(/(.*)(_[a-z]+)(\..*)/, "$1_medium$2");
    }
  }
});</code></pre>
                </p>
                <p>
                    Remember that if this option is defined, <code>sizeRangeSuffixes</code> is not considered.
                </p>
            </td>
        </tr>
        <tr>
            <td><code>lastRow</code></td>
            <td><code>'nojustify'</code></td>
            <td>Decide to justify the last row (using <code>'justify'</code>) or not (using <code>'nojustify'</code>),
                or to hide the row if it can't be justified (using <code>'hide'</code>). By default, using <code>'nojustify'</code>,
                the
                last row images are aligned to the left, but they can be also aligned to the center (using <code>'center'</code>)
                or to the right (using <code>'right'</code>).
            </td>
        </tr>
        <tr>
            <td><code>captions</code></td>
            <td><code>true</code></td>
            <td>Decide if you want to show the captions that appears when your mouse is over the image.</td>
        </tr>
        <tr>
            <td><code>margins</code></td>
            <td><code>1</code></td>
            <td>Decide the margins between the images</td>
        </tr>
        <tr>
            <td><code>border</code></td>
            <td><code>-1</code></td>
            <td>Decide the border size of the gallery. With a negative value the border will be the same as the
                margins.
            </td>
        </tr>
        <tr>
            <td><code>waitThumbnailsLoad</code></td>
            <td><code>true</code></td>
            <td>In presence of width and height attributes in thumbnails, the layout is immediately built,
                and the thumbnails will appear randomly while they are loaded.
            </td>
        </tr>
        <tr>
            <td><code>randomize</code></td>
            <td><code>false</code></td>
            <td>Automatically randomize or not the order of photos.</td>
        </tr>
        <tr>
            <td><code>filter</code></td>
            <td><code>false</code></td>
            <td>
                Can be:
                <ul>
                    <li><code>false</code>: for a disabled filter.</li>
                    <li>a string: an entry is kept if <code>entry.is(filter string)</code> returns <code>true</code>
                        (see jQuery's <code><a href="http://api.jquery.com/is/">.is()</a></code> function for further
                        information).
                    </li>
                    <li>a function: invoked with arguments (entry, index, array). Return <code>true</code> to keep the
                        entry, <code>false</code> otherwise.
                        see <code><a
                                href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">Array.prototype.filter</a></code>
                        for further information.
                    </li>
                </ul>
            </td>
        </tr>
        <tr>
            <td><code>sort</code></td>
            <td><code>false</code></td>
            <td> Can be
                <ul>
                    <li><code>false</code> to do not sort.</li>
                    <li>a function to sort them using the function as comparator
                        (see <code><a
                                href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort">Array.prototype.sort()</a></code>).
                    </li>
                </ul>
            </td>
        </tr>
        <tr>
            <td><code>rtl</code></td>
            <td style="white-space: nowrap;"><code>false</code></td>
            <td>
                Right to left mode.
            </td>
        </tr>
        <tr>
            <td><code>selector</code></td>
            <td style="white-space: nowrap;"><code>'a, div:not(.spinner)'</code></td>
            <td>
                Used to determines which are the entries of the gallery. Note that, for performance reasons, the entries of the gallery are always
                direct children of the gallery.
            </td>
        </tr>
        <tr>
            <td><code>imgSelector</code></td>
            <td style="white-space: nowrap;"><code>'> img, > a > img'</code></td>
            <td>
                Used to determines, given a gallery entry, how to retrieve the thumbnail.
            </td>
        </tr>
        <tr>
            <td><code>extension</code></td>
            <td><code>/.[^.]+$/</code></td>
            <td>Specify the extension for the images with a regex. Is used to reconstruct the filename of the images,
                change it if you need. For example <code>/.jpg$/</code> is to detect only the ".jpg" extension and no
                more.
            </td>
        </tr>
        <tr>
            <td><code>refreshTime</code></td>
            <td><code>250</code></td>
            <td>The waited time before checking the page size. If the page width has changed the gallery
                layout is rebuilt.
            </td>
        </tr>
        <tr>
            <td><code>refreshSensitivity</code></td>
            <td><code>0</code></td>
            <td>Change in width allowed (in px) without re-building the gallery.</td>
        </tr>
        <tr>
            <td><code>rel</code></td>
            <td></td>
            <td>To rewrite all the links <code>rel</code> attribute with the specified value.
                For example can be 'gallery1', and is usually used to create gallery group for the lightbox (e.g.
                Colorbox).
            </td>
        </tr>
        <tr>
            <td><code>target</code></td>
            <td></td>
            <td>To rewrite all the links <code>target</code> attribute with the specified value.
                For example, if you don't use a lightbox, specifying <code>'_blank'</code>, all the
                images will be opened to another page.
            </td>
        </tr>
        <tr>
            <td><code>justifyThreshold</code></td>
            <td>0.75</td>
            <td>If <i>'available space' / 'row width' > 0.75</i> the last row is justified, even though
                the <code>lastRow</code> setting is <code>'nojustify'</code>.
            </td>
        </tr>
        <tr>
            <td><code>cssAnimation</code></td>
            <td>true</td>
            <td>Use or not css animations. With CSS animations it's easier to change them by
                overriding the rules defined by Justified Gallery.
            </td>
        </tr>
        <tr>
            <td><code>imagesAnimationDuration</code></td>
            <td>500</td>
            <td>Image fadeIn duration (in milliseconds). This is ignored if CSS animations are used.</td>
        </tr>
        <tr>
            <td><code>captionSettings</code></td>
            <td>
                <code style="white-space: nowrap;">{ animationDuration: 500,<br/>
                    &nbsp;&nbsp;visibleOpacity: 0.7,<br/>
                    &nbsp;&nbsp;nonVisibleOpacity: 0.0 }</code>
            </td>
            <td>Caption settings. To configure the animation duration (in milliseconds), the caption opacity when the
                mouse is over (i.e. it should be visible), and the caption opacity when the mouse is not over (i.e. it
                should be not visible). This is ignored if CSS animations are used.
            </td>
        </tr>
    </table>
</div>

<h2>Commands</h2>

<div style="margin-top: 20px;">
    <table class="table">
        <tr>
            <th>Command</th>
            <th>Description</th>
        </tr>
        <tr>
            <td><code>norewind</code></td>
            <td>Call again justified gallery, but only the newest images will be justified.
                This command could be used for example with the <a
                        href="{{ '/endless-scroll' | prepend: site.baseurl }}">infinite scroll</a>.
                Remember that with norewind only the last images will be analyzed, so this means that any pre-defined filter, sort,
                or shuffle actions will only be done on the last entries. That is a great advantage in terms of performances,
                but pay attention in case you want a different behaviour.
            </td>
        </tr>
        <tr>
            <td><code>destroy</code></td>
            <td>Destroy the justified gallery instance. The images justification will be cleared.</td>
        </tr>
    </table>

    <h3>Example</h3>
    {% highlight javascript %}
$('#commandtest').justifiedGallery('norewind');{% endhighlight %}
</div>

<h2>Events</h2>

<div style="margin-top: 20px;">
    <table class="table">
        <tr>
            <th>Event</th>
            <th>Description</th>
        </tr>
        <tr>
            <td><code>jg.complete</code></td>
            <td>When the algorithm finished to create the gallery layout.</td>
        </tr>
        <tr>
            <td><code>jg.resize</code></td>
            <td>When the algorithm finished to resize the gallery.</td>
        </tr>
        <tr>
            <td><code>jg.rowflush</code></td>
            <td>When the a new row is ready.</td>
        </tr>
    </table>

    <h3>Example</h3>
    {% highlight javascript %}
$('#callbacktest').justifiedGallery().on('jg.complete', function (e) {
    alert('on complete');
});{% endhighlight %}
</div>
